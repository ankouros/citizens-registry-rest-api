# Φάση Προετοιμασίας Υποδομής (Prepare Phase)

## Περιγραφή

Η παρούσα φάση αφορά τη **φάση προετοιμασίας** της διαδικασίας διαχείρισης της RESTful υπηρεσίας μέσω των υποκείμενων πόρων της, σύμφωνα με τις αρχές της Υποδομής ως Κώδικα (Infrastructure as Code – IaC) και το πλαίσιο Terraform.

Στόχος της φάσης αυτής είναι η **δημιουργία μίας εικόνας εικονικής μηχανής (AMI)**, η οποία θα χρησιμοποιηθεί στη συνέχεια κατά τη φάση εκτέλεσης (deploy phase) για τη διάταξη πολλαπλών στιγμιοτύπων της RESTful υπηρεσίας.

## Αρχιτεκτονικό Πεδίο και Ρητή Οριοθέτηση

Η φάση **prepare** είναι **συνειδητά περιορισμένη** στη δημιουργία AMI που
περιλαμβάνει **μόνο το απαραίτητο runtime περιβάλλον** (π.χ. JRE). Η
**εγκατάσταση και εκτέλεση της επιχειρησιακής λογικής** (citizen-service JAR,
systemd service, runtime pipeline) **δεν απαιτείται από την εκφώνηση** του
μαθήματος και, συνεπώς, **δεν αποτελεί αντικείμενο της παρούσας φάσης**.

Η επιλογή αυτή τεκμηριώνει τον παιδαγωγικό στόχο της ενότητας: την **διαχείριση
του κύκλου ζωής της υποδομής IaaS** και όχι την αυτοματοποίηση της διάθεσης
λογισμικού.

## Λειτουργία της Φάσης

Η φάση προετοιμασίας υλοποιείται μέσω των παρακάτω βημάτων:

1. Δημιουργείται ένα **προσωρινό στιγμιότυπο εικονικής μηχανής (EC2 instance)**, το οποίο λειτουργεί ως *builder instance*.
2. Στο στιγμιότυπο αυτό εγκαθίσταται το απαραίτητο **περιβάλλον εκτέλεσης** για τη RESTful υπηρεσία, και συγκεκριμένα:
   - Java Runtime Environment (OpenJDK 17).
3. Το στιγμιότυπο εικονικής μηχανής τίθεται σε κατάσταση παύσης (stopped), ώστε να διασφαλιστεί η συνεπής κατάστασή του.
4. Δημιουργείται μία **εικόνα εικονικής μηχανής (AMI)** από το στιγμιότυπο αυτό.
5. Το αναγνωριστικό της εικόνας (AMI ID) εξάγεται ως έξοδος (output) του Terraform και χρησιμοποιείται στη φάση εκτέλεσης.

Σημειώνεται ότι η εικόνα που παράγεται περιλαμβάνει το περιβάλλον εκτέλεσης της εφαρμογής και όχι τον ίδιο τον πηγαίο κώδικα ή το εκτελέσιμο αρχείο της RESTful υπηρεσίας. Η επιλογή αυτή είναι σύμφωνη με τη διδακτική προσέγγιση του μαθήματος.

## Αποτελέσματα

Με την επιτυχή ολοκλήρωση της φάσης προετοιμασίας παράγεται:

- Μία εικόνα εικονικής μηχανής (AMI) για τη RESTful υπηρεσία.
- Το αναγνωριστικό της εικόνας (AMI ID), το οποίο χρησιμοποιείται ως είσοδος (variable) στη φάση εκτέλεσης της υποδομής.

## Εκτέλεση

Για την εκτέλεση της φάσης προετοιμασίας απαιτείται:

- Ρυθμισμένος λογαριασμός AWS.
- Διαμορφωμένα διαπιστευτήρια (AWS credentials).
- Έγκυρο EC2 key pair.

Η εκτέλεση πραγματοποιείται με τις ακόλουθες εντολές:

```bash
terraform init
terraform apply
```
